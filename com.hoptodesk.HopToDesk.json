{
  "id" : "com.hoptodesk.HopToDesk",
  "runtime" : "org.freedesktop.Platform",
  "runtime-version" : "23.08",
  "sdk" : "org.freedesktop.Sdk",
  "command" : "hoptodesk",
  "modules" : [
    "shared-modules/libappindicator/libappindicator-gtk3-12.10.json",
    {
      "name": "xdotool",
      "no-autogen": true,
      "make-args": [
          "WITHOUT_RPATH_FIX=1"
      ],
      "make-install-args": [
          "PREFIX=${FLATPAK_DEST}",
          "INSTALLMAN=${FLATPAK_DEST}/share/man"
      ],
      "sources": [
          {
              "type": "archive",
              "url": "https://github.com/jordansissel/xdotool/archive/v3.20211022.1/xdotool-3.20211022.1.tar.gz",
              "sha256": "82b15a944a5e82fee15e0f6116bd9f642bc3d0bb6989fc0ca5ad9dfe35de0847",
              "x-checker-data": {
                  "type": "anitya",
                  "project-id": 8648,
                  "stable-only": true,
                  "url-template": "https://github.com/jordansissel/xdotool/archive/v$version/xdotool-$version.tar.gz"
              }
          }
      ],
      "cleanup": [
          "/share/man"
      ]
    },
    {
      "name" : "libpam",
      "buildsystem" : "autotools",
      "sources" : [
        {
          "url" : "https://github.com/linux-pam/linux-pam/releases/download/v1.6.1/Linux-PAM-1.6.1.tar.xz",
          "sha256" : "f8923c740159052d719dbfc2a2f81942d68dd34fcaf61c706a02c9b80feeef8e",
          "type" : "archive"
        }
      ]
    },
    {
      "name" : "HopToDesk",
      "buildsystem" : "simple",
      "sources" : [
        {
          "url": "https://www.hoptodesk.com/hoptodesk.deb",
          "sha256": "6fb51d3d61fb82124d153a5f1f554acf72d6597152ed867ab17184b673935ee6",
          "type" : "file"
        },
        {
          "url": "https://gitlab.com/hoptodesk/hoptodesk/-/raw/ab5356ba2ce36e3ee0bab6e30cc051ad07c49ecd/res/logo.svg",
          "sha256": "7107616c5649a5bd952479f02fb4619f764578fa8bcf54c4ea4bc5466244895b",
          "type" : "file"
        },
        {
          "path": "com.hoptodesk.HopToDesk.metainfo.xml",
          "type": "file"
        },
        {
          "path": "com.hoptodesk.HopToDesk.desktop",
          "type": "file"
        }
      ],
      "cleanup" : [
        "/include",
        "/lib/pkgconfig",
        "/share/gtk-doc"
      ],
      "build-commands" : [
        "bsdtar -zxvf hoptodesk.deb",
        "tar -xvf ./data.tar.xz",
        "cp -r ./usr/*  /app/",
        "cp /app/lib/libsciter-gtk.so  /app/bin/",
        "chmod 755 /app/bin/libsciter-gtk.so",
        "mkdir -p /app/bin",
        "mv com.hoptodesk.HopToDesk.desktop /app/share/applications/com.hoptodesk.HopToDesk.desktop",
        "sed -i '/^Icon=/ c\\Icon=com.hoptodesk.HopToDesk' /app/share/applications/com.hoptodesk.HopToDesk.desktop",
        "mv /app/share/icons/hicolor/128x128/128x128.png /app/share/icons/hicolor/128x128/com.hoptodesk.HopToDesk.png",
        "for size in 16 24 32 48 64 128 256 512; do\n rsvg-convert -w $size -h $size -f png -o $size.png logo.svg\n install -Dm644 $size.png /app/share/icons/hicolor/${size}x${size}/apps/com.hoptodesk.HopToDesk.png\n done",
        "mkdir -p /app/share/metainfo/ && cp com.hoptodesk.HopToDesk.metainfo.xml /app/share/metainfo/"
      ]
    }
  ],
  "finish-args" : [
    "--share=ipc",
    "--socket=x11",
    "--share=network",
    "--filesystem=home",
    "--device=dri",
    "--socket=pulseaudio"
  ]
}